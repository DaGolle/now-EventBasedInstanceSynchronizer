<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_snc_ebis.InboundEventUtil</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description>Process inbound EBIS events</description>
        <name>InboundEventUtil</name>
        <script><![CDATA[class InboundEventUtil {
	constructor() {
	}

	process(action, tableName, payload) {
		const recordObject = JSON.parse(payload);
		if (action == 'insert') {
			this._insertRecord(tableName, recordObject);
		} else if (action == 'update') {
			this._updateRecord(tableName, recordObject);
		} else if (action == 'delete') {
			this._deleteRecord(tableName, recordObject);
		} else {
			throw(`Unknown action '${action}' to process inbound event.`)
		}
	}

	_insertRecord(tableName, recordObject) {
		let grTable = new GlideRecord(tableName);
		if (recordObject.sys_id) {
			grTable.setNewGuidValue(recordObject.sys_id);
			delete recordObject.sys_id;
		}
		recordObject.forEach(function (field) {
			grTable.setValue(field, recordObject[field]);
		});
		return grTable.insert();
	}

	_updateRecord(tableName, recordObject) {
		return new global.GlideQuery(tableName)
			.where('sys_id', recordObject.sys_id)
			.update(recordObject);
	}

	_deleteRecord(tableName, recordObject) {
		return new gloabl.GlideQuery(tableName)
			.where('sys_id', recordObject.sys_id)
			.deleteMultiple();
	}
}
]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>david.van.damme</sys_created_by>
        <sys_created_on>2024-04-15 09:35:57</sys_created_on>
        <sys_id>2d5fca0247e10210cf10815a516d4393</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>InboundEventUtil</sys_name>
        <sys_package display_value="Event Based Instance Synchronizer" source="x_snc_ebis">beaac464472d8210cf10815a516d43d9</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Event Based Instance Synchronizer">beaac464472d8210cf10815a516d43d9</sys_scope>
        <sys_update_name>sys_script_include_2d5fca0247e10210cf10815a516d4393</sys_update_name>
        <sys_updated_by>david.van.damme</sys_updated_by>
        <sys_updated_on>2024-04-15 12:21:02</sys_updated_on>
    </sys_script_include>
</record_update>
