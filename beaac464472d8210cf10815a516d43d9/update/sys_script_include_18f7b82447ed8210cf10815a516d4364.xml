<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>false</active>
        <api_name>x_snc_ebis.EventRegistryUtil</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description>Helper class to manage Event Registry [sysevent_register] records</description>
        <name>EventRegistryUtil</name>
        <script><![CDATA[class EventRegistryUtil {
	constructor() {
		this._gqEventRegistry = new global.GlideQuery('sysevent_register');
	}

	insertOrUpdate(suffix, eventName, tableName, firedBy, description, priority = 100) {
		//gs.warn(`DVD suffix ${suffix}, eventName ${eventName}, tableName ${tableName}, firedBy ${firedBy}, description ${description}, priority ${priority}`);
		const sysID = this._gqEventRegistry
			.where('event_name', eventName)
			.where('table', tableName)
			.selectOne()
			.orElse({'sys_id': null})
			.sys_id;
		
		this._gqEventRegistry.insertOrUpdate({
			'sys_id': sysID,
			'suffix': suffix,
			'event_name': eventName,
			'table': tableName,
			'fired_by': firedBy,
			'description': description,
			'priority': priority
		});
	}

	delete(eventName, tableName) {
		this._gqEventRegistry
			.where('event_name', eventName)
			.where('table', tableName)
			.deleteMultiple();
	}
}
]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>david.van.damme</sys_created_by>
        <sys_created_on>2024-04-10 11:43:04</sys_created_on>
        <sys_id>18f7b82447ed8210cf10815a516d4364</sys_id>
        <sys_mod_count>19</sys_mod_count>
        <sys_name>EventRegistryUtil</sys_name>
        <sys_package display_value="Event Based Instance Synchronizer" source="x_snc_ebis">beaac464472d8210cf10815a516d43d9</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Event Based Instance Synchronizer">beaac464472d8210cf10815a516d43d9</sys_scope>
        <sys_update_name>sys_script_include_18f7b82447ed8210cf10815a516d4364</sys_update_name>
        <sys_updated_by>david.van.damme</sys_updated_by>
        <sys_updated_on>2024-04-12 09:03:17</sys_updated_on>
    </sys_script_include>
</record_update>
